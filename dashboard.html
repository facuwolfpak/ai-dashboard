<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Debrief Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .voice-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .voice-section h2 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .record-btn {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .record-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .record-btn.recording {
            background: linear-gradient(45deg, #ff4757, #c44569);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 75, 87, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(255, 75, 87, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 75, 87, 0); }
        }

        .mic-icon {
            font-size: 2rem;
            color: white;
        }

        .status {
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
        }

        .query-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .query-input {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .query-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .quick-queries {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .quick-query-btn {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 0.9rem;
        }

        .quick-query-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: auto;
        }

        .status-green { background: #2ed573; }
        .status-yellow { background: #ffa502; }
        .status-red { background: #ff4757; }

        .card-content {
            line-height: 1.6;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric:last-child {
            border-bottom: none;
        }

        .transcript {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .response-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            min-height: 150px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        .pending-alert {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .timestamp {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ AI Debrief Dashboard</h1>
            <p>Voice-powered insights and intelligent project tracking</p>
        </div>

        <div class="main-grid">
            <div class="voice-section">
                <h2>üé§ Daily Debrief</h2>
                <button class="record-btn" id="recordBtn">
                    <span class="mic-icon">üé§</span>
                </button>
                <div class="status" id="voiceStatus">Click to start recording</div>
                <div class="transcript" id="transcript" style="display: none;">
                    <div>Transcript will appear here...</div>
                </div>
            </div>

            <div class="query-section">
                <h2>üîç Ask Anything</h2>
                <input type="text" class="query-input" id="queryInput" placeholder="Ask about your projects... 'Where are we on Bahamas?'">
                
                <div class="quick-queries">
                    <button class="quick-query-btn" data-query="bahamas">üìç Where are we on Bahamas?</button>
                    <button class="quick-query-btn" data-query="pending">‚ö†Ô∏è Show pending items</button>
                    <button class="quick-query-btn" data-query="timeline">üìÖ Project timelines</button>
                    <button class="quick-query-btn" data-query="budget">üí∞ Budget status</button>
                </div>

                <div class="response-area" id="responseArea">
                    <div style="opacity: 0.6;">Ask a question to see AI-organized insights...</div>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">üèùÔ∏è Bahamas Project</div>
                    <div class="status-indicator status-yellow"></div>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span>Progress:</span>
                        <span>65% Complete</span>
                    </div>
                    <div class="metric">
                        <span>Budget:</span>
                        <span>$850k / $1.2M</span>
                    </div>
                    <div class="metric">
                        <span>Timeline:</span>
                        <span>2 weeks behind</span>
                    </div>
                    <div class="pending-alert">
                        <strong>‚ö†Ô∏è Pending:</strong> Environmental permits approval needed
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">üöÄ Miami Expansion</div>
                    <div class="status-indicator status-green"></div>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span>Progress:</span>
                        <span>92% Complete</span>
                    </div>
                    <div class="metric">
                        <span>Budget:</span>
                        <span>$2.1M / $2.3M</span>
                    </div>
                    <div class="metric">
                        <span>Timeline:</span>
                        <span>On track</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">üè¢ Office Renovation</div>
                    <div class="status-indicator status-red"></div>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span>Progress:</span>
                        <span>30% Complete</span>
                    </div>
                    <div class="metric">
                        <span>Budget:</span>
                        <span>$450k / $500k</span>
                    </div>
                    <div class="metric">
                        <span>Timeline:</span>
                        <span>4 weeks delayed</span>
                    </div>
                    <div class="pending-alert">
                        <strong>üö® Critical:</strong> Contractor selection overdue
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">üìä Weekly Analytics</div>
                    <div class="status-indicator status-green"></div>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span>Team Productivity:</span>
                        <span>+15%</span>
                    </div>
                    <div class="metric">
                        <span>Active Projects:</span>
                        <span>12</span>
                    </div>
                    <div class="metric">
                        <span>Completed Tasks:</span>
                        <span>47 this week</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // All global variables
        let isRecording = false;
        let recognition = null;

        // Project data
        const projectData = {
            bahamas: {
                status: "In Progress - Behind Schedule",
                progress: "65% complete",
                budget: "$850k spent of $1.2M budget",
                timeline: "2 weeks behind original schedule",
                lastUpdate: "Environmental permits still pending approval from Nassau authorities",
                keyMilestones: [
                    "Site survey: ‚úÖ Completed",
                    "Design phase: ‚úÖ Completed", 
                    "Permits: ‚ö†Ô∏è Pending (blocking construction)",
                    "Construction: üìÖ Waiting for permits"
                ],
                risks: "Permit delays could extend timeline by additional 3-4 weeks",
                nextSteps: "Follow up with local authorities, prepare alternative timeline"
            }
        };

        // Main functions
        function startVoiceDemo() {
            console.log('Starting voice demo...');
            document.getElementById('voiceStatus').textContent = 'Demo: Simulating voice input...';
            document.getElementById('transcript').style.display = 'block';
            
            const sampleTranscript = "Today we made significant progress on the Miami expansion - we're now at 92% completion and should finish on schedule. However, the Bahamas project hit another snag - we're still waiting for those environmental permits from Nassau. This is now putting us 2 weeks behind schedule. I spoke with our legal team and they think we might need to escalate this to higher authorities. On the positive side, our budget is still looking good across all projects. The office renovation is concerning me though - we still haven't selected a contractor and we're already 4 weeks delayed. We need to make some decisions fast.";
            
            let i = 0;
            const typingInterval = setInterval(() => {
                document.getElementById('transcript').innerHTML = `<div>"${sampleTranscript.substring(0, i)}"</div>`;
                i += 2;
                if (i > sampleTranscript.length) {
                    clearInterval(typingInterval);
                    document.getElementById('voiceStatus').textContent = 'Demo complete - AI processing...';
                    setTimeout(() => {
                        processVoiceInput(sampleTranscript);
                        document.getElementById('voiceStatus').innerHTML = `
                            <div>‚úÖ Demo complete!</div>
                            <div style="font-size: 0.8rem; margin-top: 5px;">
                                To use real voice: Enable microphone in browser settings
                            </div>
                        `;
                    }, 1000);
                }
            }, 30);
        }

        function processVoiceInput(transcript) {
            const responseArea = document.getElementById('responseArea');
            responseArea.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <strong>üé§ Voice Input Processed:</strong> "${transcript.substring(0, 100)}..."
                </div>
                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
                    <strong>AI Analysis:</strong><br>
                    I've logged your debrief input and identified key topics. I can now answer specific questions about your projects based on this context.
                </div>
                <div class="timestamp">Processed at ${new Date().toLocaleTimeString()}</div>
            `;
        }

        function handleQuickQuery(type) {
            const responseArea = document.getElementById('responseArea');
            let response = '';

            switch(type) {
                case 'bahamas':
                    response = generateBahamasReport();
                    break;
                case 'pending':
                    response = generatePendingReport();
                    break;
                case 'timeline':
                    response = generateTimelineReport();
                    break;
                case 'budget':
                    response = generateBudgetReport();
                    break;
            }

            responseArea.innerHTML = response;
        }

        function generateBahamasReport() {
            const data = projectData.bahamas;
            return `
                <div style="margin-bottom: 15px;">
                    <strong>üèùÔ∏è Bahamas Project Status Report</strong>
                </div>
                
                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <strong>Current Status:</strong> ${data.status}<br>
                    <strong>Progress:</strong> ${data.progress}<br>
                    <strong>Budget:</strong> ${data.budget}<br>
                    <strong>Timeline:</strong> ${data.timeline}
                </div>

                <div style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <strong>‚ö†Ô∏è Critical Issue:</strong><br>
                    ${data.lastUpdate}
                </div>

                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
                    <strong>Key Milestones:</strong><br>
                    ${data.keyMilestones.map(m => `‚Ä¢ ${m}`).join('<br>')}
                </div>

                <div class="timestamp">Updated ${new Date().toLocaleString()}</div>
            `;
        }

        function generatePendingReport() {
            return `
                <div style="margin-bottom: 15px;">
                    <strong>‚ö†Ô∏è Pending Items Across All Projects</strong>
                </div>
                
                <div style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                    <strong>üö® Critical - Bahamas:</strong> Environmental permits approval needed
                </div>

                <div style="background: rgba(255,165,2,0.2); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                    <strong>üè¢ Office Renovation:</strong> Contractor selection overdue (4 weeks delayed)
                </div>

                <div style="background: rgba(255,165,2,0.2); padding: 15px; border-radius: 10px;">
                    <strong>üìä Miami Expansion:</strong> Final inspection scheduled for next week
                </div>

                <div class="timestamp">Alert generated ${new Date().toLocaleString()}</div>
            `;
        }

        function generateTimelineReport() {
            return `
                <div style="margin-bottom: 15px;">
                    <strong>üìÖ Project Timeline Overview</strong>
                </div>
                
                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
                    <div style="margin-bottom: 10px;"><strong>üèùÔ∏è Bahamas:</strong> 2 weeks behind, est. completion +3-4 weeks</div>
                    <div style="margin-bottom: 10px;"><strong>üöÄ Miami:</strong> On track, completion in 2 weeks</div>
                    <div><strong>üè¢ Office:</strong> 4 weeks delayed, needs immediate attention</div>
                </div>

                <div class="timestamp">Timeline updated ${new Date().toLocaleString()}</div>
            `;
        }

        function generateBudgetReport() {
            return `
                <div style="margin-bottom: 15px;">
                    <strong>üí∞ Budget Status Overview</strong>
                </div>
                
                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
                    <div style="margin-bottom: 10px;"><strong>üèùÔ∏è Bahamas:</strong> $850k / $1.2M (71% utilized)</div>
                    <div style="margin-bottom: 10px;"><strong>üöÄ Miami:</strong> $2.1M / $2.3M (91% utilized)</div>
                    <div style="margin-bottom: 10px;"><strong>üè¢ Office:</strong> $450k / $500k (90% utilized)</div>
                    <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px; margin-top: 10px;">
                        <strong>Total Allocated:</strong> $4M | <strong>Total Spent:</strong> $3.4M
                    </div>
                </div>

                <div class="timestamp">Budget updated ${new Date().toLocaleString()}</div>
            `;
        }

        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up dashboard...');
            
            // Set up microphone button
            const recordBtn = document.getElementById('recordBtn');
            if (recordBtn) {
                recordBtn.addEventListener('click', function() {
                    console.log('Microphone button clicked!');
                    startVoiceDemo();
                });
                console.log('‚úÖ Microphone button ready');
            }

            // Set up query input
            const queryInput = document.getElementById('queryInput');
            if (queryInput) {
                queryInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const query = e.target.value.toLowerCase();
                        if (query.includes('bahamas')) {
                            handleQuickQuery('bahamas');
                        } else if (query.includes('pending')) {
                            handleQuickQuery('pending');
                        } else if (query.includes('timeline') || query.includes('schedule')) {
                            handleQuickQuery('timeline');
                        } else if (query.includes('budget') || query.includes('money')) {
                            handleQuickQuery('budget');
                        } else {
                            document.getElementById('responseArea').innerHTML = `
                                <div>I understand you're asking: "${e.target.value}"</div>
                                <div style="margin-top: 15px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
                                    I'm analyzing your query and cross-referencing with project data. Try asking about specific projects like "Bahamas status" or "show pending items".
                                </div>
                            `;
                        }
                        e.target.value = '';
                    }
                });
                console.log('‚úÖ Query input ready');
            }

            // Set up quick query buttons
            const quickQueryBtns = document.querySelectorAll('.quick-query-btn');
            quickQueryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const queryType = this.getAttribute('data-query');
                    console.log('Quick query clicked:', queryType);
                    handleQuickQuery(queryType);
                });
            });
            console.log('‚úÖ Quick query buttons ready:', quickQueryBtns.length);

            console.log('üéØ Dashboard fully initialized!');
        });
    </script>
</body>
</html>