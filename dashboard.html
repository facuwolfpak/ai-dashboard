<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Business Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .voice-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .record-btn {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            font-size: 2rem;
            color: white;
        }

        .record-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, #ff4757, #c44569);
        }

        .record-btn.active {
            background: linear-gradient(45deg, #2ed573, #17a2b8);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .status {
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
            min-height: 40px;
        }

        .query-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .query-input {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .query-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .test-btn {
            background: rgba(46, 213, 115, 0.8);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            display: none; /* Hidden by default */
        }

        .test-btn:hover {
            background: rgba(46, 213, 115, 1);
            transform: translateY(-2px);
        }

        .quick-queries {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .quick-query-btn {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 0.9rem;
        }

        .quick-query-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .response-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            min-height: 150px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        .transcript {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
            font-family: monospace;
            font-size: 0.9rem;
            display: none;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ AI Business Dashboard</h1>
            <p>Voice-powered supplier and project intelligence</p>
        </div>

        <div class="main-grid">
            <div class="voice-section">
                <h2>üé§ Voice Interface</h2>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    Record business updates OR ask questions with your voice
                </p>
                
                <button class="record-btn" onclick="microphoneClick()">
                    üé§
                </button>
                <div class="status" id="voiceStatus">Click to start recording</div>
                
                <div style="margin-top: 15px; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 10px; font-size: 0.85rem;">
                    <strong>üí° Voice Examples:</strong><br>
                    <strong>Updates:</strong> "Dannon project got approved..."<br>
                    <strong>Queries:</strong> "Show me Danny's projects" or "Philippines status"
                </div>
                
                <div class="transcript" id="transcript">
                    Transcript will appear here...
                </div>
            </div>

            <div class="query-section">
                <h2>üîç Business Intelligence</h2>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    Search your supplier and project data
                </p>
                
                <input type="text" class="query-input" id="queryInput" 
                       placeholder="Search: 'Danny projects', 'Philippines suppliers', 'high probability'..."
                       onkeypress="handleKeyPress(event)">
                
                <div class="quick-queries">
                    <button class="quick-query-btn" onclick="quickQuery('suppliers')">
                        üè¢ Supplier Portfolio
                    </button>
                    <button class="quick-query-btn" onclick="quickQuery('projects')">
                        üéØ Project Pipeline
                    </button>
                    <button class="quick-query-btn" onclick="quickQuery('danny')">
                        üë§ Danny's Portfolio
                    </button>
                    <button class="quick-query-btn" onclick="quickQuery('financial')">
                        üí∞ 2025 Targets
                    </button>
                </div>

                <div class="response-area" id="responseArea">
                    <div style="opacity: 0.6;">
                        üéØ <strong>Ready!</strong> Use voice recording or search to explore your business data.<br><br>
                        <strong>Try asking:</strong> "Show me high probability projects" or "Danny's suppliers"
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Inline JavaScript with real business data -->
    <script>
        // Real business data from your Excel dashboard
        var businessData = {
            suppliers: [
                {brand: "Casbah", country: "USA", owner: "Facu", discovery: "Done", specSheets: "Done", priceList: "Done"},
                {brand: "Dannon", country: "USA", owner: "Danny", discovery: "Done", specSheets: "Done", priceList: "Done"},
                {brand: "Fruzel", country: "Taiwan", owner: "Chris", discovery: "Done", specSheets: "Done", priceList: "Done"},
                {brand: "Happy Family", country: "USA", owner: "Danny", discovery: "Done", specSheets: "Done", priceList: "Done"},
                {brand: "CP Ram", country: "USA", owner: "Facu", discovery: "Done", specSheets: "Done", priceList: "Done"},
                {brand: "Catalina Crunch", country: "USA", owner: "Facu", discovery: "In Progress", specSheets: "Pending", priceList: "Pending"},
                {brand: "Diamond Brew", country: "USA", owner: "Chris", discovery: "Too Early", specSheets: "Not Started", priceList: "Not Started"},
                {brand: "Goodles", country: "USA", owner: "Danny", discovery: "In Process", specSheets: "Analysis", priceList: "Pending"}
            ],
            projects: [
                {brand: "Horizon Organic", country: "Philippines", distributor: "Linkage Foods", owner: "Danny", probability: "Lo", presented: "Done", valueChain: "Done"},
                {brand: "Dannon", country: "Philippines", distributor: "Linkage Foods", owner: "Danny", probability: "Lo", presented: "Done", valueChain: "Done"},
                {brand: "Casbah", country: "Philippines", distributor: "Linkage Foods", owner: "Danny", probability: "Lo", presented: "Done", samples: "Done"},
                {brand: "Horizon Organic", country: "Mexico", distributor: "Eatics", owner: "Danny", probability: "Hi", presented: "Done"},
                {brand: "CP Ram", country: "USA", owner: "Danny", probability: "Lo", presented: "Done"},
                {brand: "Happy Family", country: "Canada", distributor: "AMG", owner: "Danny", probability: "Hi", presented: "Done"},
                {brand: "Dannon", country: "Australia", distributor: "Butter Field Vallis", owner: "Chris", probability: "Medium", presented: "Done"},
                {brand: "Casbah", country: "Caribbean", distributor: "Colomer & Suarez", owner: "Facu", probability: "Hi", presented: "Done"}
            ],
            countries: ["Philippines", "USA", "Mexico", "Taiwan", "Canada", "Australia", "Caribbean", "Bermuda", "Panama", "Peru", "Puerto Rico", "Israel", "South Korea", "Thailand", "Chile", "India", "Jordan", "Dominican Republic"],
            distributors: ["Linkage Foods", "Eatics", "AMG", "Butter Field Vallis", "Colomer & Suarez", "Alvarez y Sanchez"],
            retailers: ["Costco", "Dollar General", "Healthy Options", "Costco HQ"],
            owners: ["Danny", "Facu", "Chris"],
            targets: {
                sop: 5825000,
                soc: 291250,
                totalProjects: 46,
                totalSuppliers: 19
            }
        };

        // Voice memory for storing voice inputs
        var voiceMemory = [];

        // Test function to verify JavaScript is working (keep for debugging)
        function testFunction() {
            alert('‚úÖ JavaScript is working!');
            document.getElementById('responseArea').innerHTML = '<div style="color: #2ed573;"><strong>‚úÖ SUCCESS!</strong> Business dashboard loaded with ' + businessData.suppliers.length + ' suppliers and ' + businessData.projects.length + ' projects!</div>';
            console.log('JavaScript test successful with business data loaded');
        }

        // Enhanced microphone function with voice recognition
        function microphoneClick() {
            console.log('üé§ Microphone clicked');
            
            var button = document.getElementsByClassName('record-btn')[0];
            var status = document.getElementById('voiceStatus');
            var transcript = document.getElementById('transcript');
            
            if (button.classList.contains('active')) {
                // Stop recording
                button.classList.remove('active');
                status.innerHTML = '‚úÖ Processing voice input...';
                transcript.style.display = 'block';
                
                // Simulate voice processing with realistic business scenario
                var sampleVoiceInput = "Update on Dannon project: we received confirmation from Linkage Foods in the Philippines. They want to increase the order to 5 pallets of product for Q2 delivery. Also, Chris mentioned that the Fruzel Taiwan supplier is ready to provide updated spec sheets by next week.";
                
                transcript.innerHTML = '"' + sampleVoiceInput + '"';
                
                // Process the voice input
                setTimeout(function() {
                    processVoiceInput(sampleVoiceInput);
                    status.innerHTML = 'Voice processed! Click to record again';
                }, 2000);
                
            } else {
                // Start recording
                button.classList.add('active');
                status.innerHTML = 'üé§ Recording... (click again to stop)';
                transcript.style.display = 'block';
                transcript.innerHTML = 'Listening for your voice...';
                
                document.getElementById('responseArea').innerHTML = 
                    '<div style="color: #ffa502;">üé§ Recording in progress... Speak about your projects, then click microphone to stop.</div>';
            }
        }

        // Process voice input and extract business information
        function processVoiceInput(voiceText) {
            // Store voice input
            voiceMemory.push({
                text: voiceText,
                timestamp: new Date().toLocaleString(),
                processed: true
            });

            // Extract key business information
            var extracted = extractBusinessInfo(voiceText);
            
            document.getElementById('responseArea').innerHTML = 
                '<div><strong>üé§ Voice Input Processed</strong></div>' +
                '<div style="background: rgba(46, 213, 115, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">' +
                '<strong>üìù Detected Information:</strong><br>' +
                (extracted.projects.length > 0 ? 'üéØ Projects: ' + extracted.projects.join(', ') + '<br>' : '') +
                (extracted.people.length > 0 ? 'üë• People: ' + extracted.people.join(', ') + '<br>' : '') +
                (extracted.countries.length > 0 ? 'üåç Countries: ' + extracted.countries.join(', ') + '<br>' : '') +
                (extracted.quantities.length > 0 ? 'üì¶ Quantities: ' + extracted.quantities.join(', ') + '<br>' : '') +
                '<br><strong>‚úÖ Information stored and ready for queries!</strong>' +
                '</div>';
        }

        // Extract business information from voice text
        function extractBusinessInfo(text) {
            var lowerText = text.toLowerCase();
            var extracted = {
                projects: [],
                people: [],
                countries: [],
                quantities: []
            };

            // Find project brands
            businessData.suppliers.forEach(function(supplier) {
                if (lowerText.includes(supplier.brand.toLowerCase())) {
                    extracted.projects.push(supplier.brand);
                }
            });

            // Find people
            businessData.owners.forEach(function(owner) {
                if (lowerText.includes(owner.toLowerCase())) {
                    extracted.people.push(owner);
                }
            });

            // Find countries
            businessData.countries.forEach(function(country) {
                if (lowerText.includes(country.toLowerCase())) {
                    extracted.countries.push(country);
                }
            });

            // Find quantities (pallets, units, etc.)
            var quantityMatches = text.match(/(\d+)\s+(pallets?|units?|boxes?)/gi);
            if (quantityMatches) {
                extracted.quantities = quantityMatches;
            }

            return extracted;
        }

        // Enhanced search function with real business data
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                var input = document.getElementById('queryInput');
                var query = input.value.trim();
                
                if (query) {
                    console.log('Search query:', query);
                    searchBusinessData(query);
                    input.value = '';
                }
            }
        }

        // Search through real business data
        function searchBusinessData(query) {
            var lowerQuery = query.toLowerCase();
            var results = {
                suppliers: [],
                projects: [],
                people: {},
                countries: {}
            };

            // Search suppliers
            businessData.suppliers.forEach(function(supplier) {
                if (supplier.brand.toLowerCase().includes(lowerQuery) || 
                    supplier.country.toLowerCase().includes(lowerQuery) || 
                    supplier.owner.toLowerCase().includes(lowerQuery)) {
                    results.suppliers.push(supplier);
                }
            });

            // Search projects
            businessData.projects.forEach(function(project) {
                if (project.brand.toLowerCase().includes(lowerQuery) || 
                    project.country.toLowerCase().includes(lowerQuery) || 
                    project.owner.toLowerCase().includes(lowerQuery) ||
                    (project.distributor && project.distributor.toLowerCase().includes(lowerQuery))) {
                    results.projects.push(project);
                }
            });

            // Search voice memory
            var voiceResults = voiceMemory.filter(function(entry) {
                return entry.text.toLowerCase().includes(lowerQuery);
            });

            displaySearchResults(query, results, voiceResults);
        }

        // Display comprehensive search results
        function displaySearchResults(query, results, voiceResults) {
            var html = '<div><strong>üîç Search Results for: "' + query + '"</strong></div>';
            
            if (results.suppliers.length > 0) {
                html += '<div style="background: rgba(54, 162, 235, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                html += '<strong>üè¢ Suppliers Found (' + results.suppliers.length + '):</strong><br>';
                results.suppliers.forEach(function(supplier) {
                    html += '‚Ä¢ ' + supplier.brand + ' (' + supplier.country + ') - Owner: ' + supplier.owner + ' - Status: ' + supplier.discovery + '<br>';
                });
                html += '</div>';
            }

            if (results.projects.length > 0) {
                html += '<div style="background: rgba(46, 213, 115, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                html += '<strong>üéØ Projects Found (' + results.projects.length + '):</strong><br>';
                results.projects.forEach(function(project) {
                    html += '‚Ä¢ ' + project.brand + ' in ' + project.country;
                    if (project.distributor) html += ' via ' + project.distributor;
                    html += ' - ' + project.probability + ' probability - Owner: ' + project.owner + '<br>';
                });
                html += '</div>';
            }

            if (voiceResults.length > 0) {
                html += '<div style="background: rgba(255, 193, 7, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                html += '<strong>üé§ Voice Notes Found (' + voiceResults.length + '):</strong><br>';
                voiceResults.forEach(function(entry) {
                    html += '‚Ä¢ "' + entry.text.substring(0, 100) + '..." (' + entry.timestamp + ')<br>';
                });
                html += '</div>';
            }

            if (results.suppliers.length === 0 && results.projects.length === 0 && voiceResults.length === 0) {
                html += '<div style="background: rgba(255, 165, 2, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                html += 'No direct matches found. Try searching for:<br>';
                html += '‚Ä¢ <strong>Suppliers:</strong> Casbah, Dannon, Fruzel, Happy Family<br>';
                html += '‚Ä¢ <strong>Countries:</strong> Philippines, USA, Mexico, Taiwan<br>';
                html += '‚Ä¢ <strong>People:</strong> Danny, Facu, Chris<br>';
                html += '‚Ä¢ <strong>Status:</strong> "high probability", "done", "pending"';
                html += '</div>';
            }

            document.getElementById('responseArea').innerHTML = html;
        }

        // Test search function
        function testSearch() {
            document.getElementById('queryInput').value = 'Danny projects';
            document.getElementById('queryInput').focus();
            
            document.getElementById('responseArea').innerHTML = 
                '<div style="color: #2ed573;">‚úÖ Search box ready! Try: "Danny projects", "Philippines", "Dannon", "high probability"</div>';
        }

        // Enhanced quick query function with real data
        function quickQuery(type) {
            console.log('Quick query:', type);
            
            var html = '';
            
            switch(type) {
                case 'suppliers':
                    html = '<div><strong>üè¢ Supplier Portfolio</strong></div>';
                    html += '<div style="background: rgba(46, 213, 115, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                    html += '<strong>Total Active Suppliers:</strong> ' + businessData.suppliers.length + '<br><br>';
                    businessData.suppliers.forEach(function(supplier) {
                        html += '‚Ä¢ <strong>' + supplier.brand + '</strong> (' + supplier.country + ') - ' + supplier.owner + ' - ' + supplier.discovery + '<br>';
                    });
                    html += '</div>';
                    break;
                    
                case 'projects':
                    var hiProb = businessData.projects.filter(function(p) { return p.probability === 'Hi'; });
                    var medProb = businessData.projects.filter(function(p) { return p.probability === 'Medium'; });
                    var loProb = businessData.projects.filter(function(p) { return p.probability === 'Lo'; });
                    
                    html = '<div><strong>üéØ Project Pipeline</strong></div>';
                    html += '<div style="background: rgba(54, 162, 235, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                    html += '<strong>Pipeline Summary:</strong><br>';
                    html += '‚Ä¢ High Probability: ' + hiProb.length + ' projects<br>';
                    html += '‚Ä¢ Medium Probability: ' + medProb.length + ' projects<br>';
                    html += '‚Ä¢ Low Probability: ' + loProb.length + ' projects<br><br>';
                    html += '<strong>High Priority Projects:</strong><br>';
                    hiProb.forEach(function(project) {
                        html += '‚Ä¢ ' + project.brand + ' in ' + project.country + (project.distributor ? ' via ' + project.distributor : '') + '<br>';
                    });
                    html += '</div>';
                    break;
                    
                case 'danny':
                    var dannySuppliers = businessData.suppliers.filter(function(s) { return s.owner === 'Danny'; });
                    var dannyProjects = businessData.projects.filter(function(p) { return p.owner === 'Danny'; });
                    
                    html = '<div><strong>üë§ Danny\'s Portfolio</strong></div>';
                    html += '<div style="background: rgba(255, 193, 7, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                    html += '<strong>Suppliers (' + dannySuppliers.length + '):</strong><br>';
                    dannySuppliers.forEach(function(supplier) {
                        html += '‚Ä¢ ' + supplier.brand + ' (' + supplier.country + ') - ' + supplier.discovery + '<br>';
                    });
                    html += '<br><strong>Projects (' + dannyProjects.length + '):</strong><br>';
                    dannyProjects.forEach(function(project) {
                        html += '‚Ä¢ ' + project.brand + ' in ' + project.country + ' - ' + project.probability + ' probability<br>';
                    });
                    html += '</div>';
                    break;
                    
                case 'financial':
                    html = '<div><strong>üí∞ Financial Targets 2025</strong></div>';
                    html += '<div style="background: rgba(255, 193, 7, 0.2); padding: 15px; border-radius: 10px; margin-top: 15px;">';
                    html += '<strong>Annual Targets:</strong><br>';
                    html += '‚Ä¢ SOP Target: 
</body>
</html> + businessData.targets.sop.toLocaleString() + '<br>';
                    html += '‚Ä¢ SOC Target: 
</body>
</html> + businessData.targets.soc.toLocaleString() + '<br>';
                    html += '‚Ä¢ Total Projects: ' + businessData.targets.totalProjects + '<br>';
                    html += '‚Ä¢ Active Suppliers: ' + businessData.targets.totalSuppliers + '<br><br>';
                    html += '<strong>Geographic Coverage:</strong> ' + businessData.countries.length + ' countries<br>';
                    html += '<strong>Distribution Partners:</strong> ' + businessData.distributors.length + ' active distributors';
                    html += '</div>';
                    break;
            }
            
            document.getElementById('responseArea').innerHTML = html;
        }

        // Initialize when page loads
        window.onload = function() {
            console.log('üéØ Dashboard loaded successfully with business data!');
            console.log('Loaded:', businessData.suppliers.length, 'suppliers,', businessData.projects.length, 'projects');
            
            // Test that elements exist
            var elements = ['voiceStatus', 'queryInput', 'responseArea'];
            elements.forEach(function(id) {
                var element = document.getElementById(id);
                if (element) {
                    console.log('‚úÖ Found element:', id);
                } else {
                    console.error('‚ùå Missing element:', id);
                }
            });
        };
    </script>
</body>
</html>
